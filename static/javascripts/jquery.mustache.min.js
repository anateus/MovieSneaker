(function(a){var b;(function(a){if(typeof module!=="undefined"&&module.exports){module.exports=a}else if(typeof define==="function"){define(a)}else{b=a}})(function(){function h(a,b){return RegExp.prototype.test.call(a,b)}function i(a){return!h(d,a)}function k(a){return a.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")}function m(a){return String(a).replace(/[&<>"'\/]/g,function(a){return l[a]})}function n(a){this.string=a;this.tail=a;this.pos=0}function o(a,b){this.view=a;this.parent=b;this.clearCache()}function p(){this.clearCache()}function q(a){var b=a[3];var c=b;var d;while((d=a[4])&&d.length){a=d[d.length-1];c=a[3]}return[b,c]}function r(a){function c(a,c,d){if(!b[a]){var e=r(c);b[a]=function(a,b){return e(a,b,d)}}return b[a]}var b={};return function(b,d,e){var f="";var g,h;for(var i=0,j=a.length;i<j;++i){g=a[i];switch(g[0]){case"#":h=e.slice.apply(e,q(g));f+=b._section(g[1],d,h,c(i,g[4],e));break;case"^":f+=b._inverted(g[1],d,c(i,g[4],e));break;case">":f+=b._partial(g[1],d);break;case"&":f+=b._name(g[1],d);break;case"name":f+=b._escaped(g[1],d);break;case"text":f+=g[1];break}}return f}}function s(a){var b=[];var c=b;var d=[];var e,f;for(var g=0;g<a.length;++g){e=a[g];switch(e[0]){case"#":case"^":e[4]=[];d.push(e);c.push(e);c=e[4];break;case"/":if(d.length===0){throw new Error("Unopened section: "+e[1])}f=d.pop();if(f[1]!==e[1]){throw new Error("Unclosed section: "+f[1])}if(d.length>0){c=d[d.length-1][4]}else{c=b}break;default:c.push(e)}}f=d.pop();if(f){throw new Error("Unclosed section: "+f[1])}return b}function t(a){var b,c;for(var d=0;d<a.length;++d){b=a[d];if(c&&c[0]==="text"&&b[0]==="text"){c[1]+=b[1];c[3]=b[3];a.splice(d--,1)}else{c=b}}}function u(a){if(a.length!==2){throw new Error("Invalid tags: "+a.join(" "))}return[new RegExp(k(a[0])+"\\s*"),new RegExp("\\s*"+k(a[1]))]}var a={};a.name="mustache.js";a.version="0.7.0";a.tags=["{{","}}"];a.Scanner=n;a.Context=o;a.Writer=p;var b=/\s*/;var c=/\s+/;var d=/\S/;var e=/\s*=/;var f=/\s*\}/;var g=/#|\^|\/|>|\{|&|=|!/;var j=Array.isArray||function(a){return Object.prototype.toString.call(a)==="[object Array]"};var l={"&":"&","<":"<",">":">",'"':""","'":"&#39;","/":"&#x2F;"};a.escape=m;n.prototype.eos=function(){return this.tail===""};n.prototype.scan=function(a){var b=this.tail.match(a);if(b&&b.index===0){this.tail=this.tail.substring(b[0].length);this.pos+=b[0].length;return b[0]}return""};n.prototype.scanUntil=function(a){var b,c=this.tail.search(a);switch(c){case-1:b=this.tail;this.pos+=this.tail.length;this.tail="";break;case 0:b="";break;default:b=this.tail.substring(0,c);this.tail=this.tail.substring(c);this.pos+=c}return b};o.make=function(a){return a instanceof o?a:new o(a)};o.prototype.clearCache=function(){this._cache={}};o.prototype.push=function(a){return new o(a,this)};o.prototype.lookup=function(a){var b=this._cache[a];if(!b){if(a==="."){b=this.view}else{var c=this;while(c){if(a.indexOf(".")>0){var d=a.split("."),e=0;b=c.view;while(b&&e<d.length){b=b[d[e++]]}}else{b=c.view[a]}if(b!=null){break}c=c.parent}}this._cache[a]=b}if(typeof b==="function"){b=b.call(this.view)}return b};p.prototype.clearCache=function(){this._cache={};this._partialCache={}};p.prototype.compile=function(b,c){var d=this._cache[b];if(!d){var e=a.parse(b,c);d=this._cache[b]=this.compileTokens(e,b)}return d};p.prototype.compilePartial=function(a,b,c){var d=this.compile(b,c);this._partialCache[a]=d;return d};p.prototype.compileTokens=function(a,b){var c=r(a);var d=this;return function(a,e){if(e){if(typeof e==="function"){d._loadPartial=e}else{for(var f in e){d.compilePartial(f,e[f])}}}return c(d,o.make(a),b)}};p.prototype.render=function(a,b,c){return this.compile(a)(b,c)};p.prototype._section=function(a,b,c,d){var e=b.lookup(a);switch(typeof e){case"object":if(j(e)){var f="";for(var g=0,h=e.length;g<h;++g){f+=d(this,b.push(e[g]))}return f}return e?d(this,b.push(e)):"";case"function":var i=this;var k=function(a){return i.render(a,b)};return e.call(b.view,c,k)||"";default:if(e){return d(this,b)}}return""};p.prototype._inverted=function(a,b,c){var d=b.lookup(a);if(!d||j(d)&&d.length===0){return c(this,b)}return""};p.prototype._partial=function(a,b){if(!(a in this._partialCache)&&this._loadPartial){this.compilePartial(a,this._loadPartial(a))}var c=this._partialCache[a];return c?c(b):""};p.prototype._name=function(a,b){var c=b.lookup(a);if(typeof c==="function"){c=c.call(b.view)}return c==null?"":String(c)};p.prototype._escaped=function(b,c){return a.escape(this._name(b,c))};a.parse=function(d,h){function r(){if(p&&!q){while(o.length){m.splice(o.pop(),1)}}else{o=[]}p=false;q=false}h=h||a.tags;var j=u(h);var l=new n(d);var m=[],o=[],p=false,q=false;var v,w,x,y;while(!l.eos()){v=l.pos;x=l.scanUntil(j[0]);if(x){for(var z=0,A=x.length;z<A;++z){y=x.charAt(z);if(i(y)){o.push(m.length)}else{q=true}m.push(["text",y,v,v+1]);v+=1;if(y==="\n"){r()}}}v=l.pos;if(!l.scan(j[0])){break}p=true;w=l.scan(g)||"name";l.scan(b);if(w==="="){x=l.scanUntil(e);l.scan(e);l.scanUntil(j[1])}else if(w==="{"){var B=new RegExp("\\s*"+k("}"+h[1]));x=l.scanUntil(B);l.scan(f);l.scanUntil(j[1]);w="&"}else{x=l.scanUntil(j[1])}if(!l.scan(j[1])){throw new Error("Unclosed tag at "+l.pos)}m.push([w,x,v,l.pos]);if(w==="name"||w==="{"||w==="&"){q=true}if(w==="="){h=x.split(c);j=u(h)}}t(m);return s(m)};var v=new p;a.clearCache=function(){return v.clearCache()};a.compile=function(a,b){return v.compile(a,b)};a.compilePartial=function(a,b,c){return v.compilePartial(a,b,c)};a.compileTokens=function(a,b){return v.compileTokens(a,b)};a.render=function(a,b,c){return v.render(a,b,c)};a.to_html=function(b,c,d,e){var f=a.render(b,c,d);if(typeof e==="function"){e(f)}else{return f}};return a}());a.mustache=function(a,c,d){return b.render(a,c,d)};a.fn.mustache=function(b,c){return a(this).map(function(d,e){var f=a(e).html().trim();var g=a.mustache(f,b,c);return a(g).get()})}})(jQuery)